# 홈푸드 PR→PO 생성 시 단가 오류 문제(09/06)1

생성자: 최예훈
생성 일시: 2023년 9월 7일 오전 9:52
태그: 업무

## 문제 상황

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled.png)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%201.png)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%202.png)

### 사용되는 Tcode

ME51N, ME52N, ME53N : 구매 요청(PR) 생성/변경/조회

ME21N, ME22N, ME23N : 구매 오더(PO) 생성/변경/조회

ME12 : 구매정보레코드 조회/변경

### 사용되는 테이블

EBAN : 구매 요청 담긴 테이블(단가는 안 담겨있음)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%203.png)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%204.png)

### PR, PO 생성

PR 생성(과거 PR 데이터 조회해서)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%205.png)

PR을 바탕으로 PO 생성

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%206.png)

### 문제점

1. 핵심문제 : 자재 단가 데이터가 8월치는 있고 9월치는 아직 등록이 안되어있는 상황
    1. 조건 레코드 값이 2022년 3월 값으로 등록되는 문제
    2. 따로 오류나 에러 메시지 안뜸
    3. 9월 단가를 구매정보레코드에 등록하고 플랜트(1600)을 직접 입력해줄 경우 단가가 반영되기는 함

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%207.png)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%208.png)

이렇게 9월 단가 만들고 플랜트 직접 입력하면 들어감.

1. 구매 요청에 있는 플랜트 정보 값이 PO 만들 때 자동으로 안 들어감

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%209.png)

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)1%2002d874def970467886ffdbbe7173d6a3/Untitled%2010.png)

### 고찰

직접 값을 넣는 경우는 들어감

왜 2022/3월이라는 뜬금없는 값이 들어가는지 모르겠음

### ZMMA0030 프로그램

PR을 조회해서 PO로 전환하는 프로그램

이 프로그램 역시 단가는 따로 구매정보레코드에서 받아옴

결국 PO 생성 시 문제 발생

### 결론 1 : 내 케이스의 원인

플랜트와 저장위치가 기본 값(플랜트 : 1400, 저장위치 1000)으로 지정이 되어있어서

PR대로 PO가 만들어지지 않았던 것

그리고 같은 자재가 1400에도 있고 1600에도 있어서 오류가 안났던것

그러나 운영 서버에 있던 문제는 이것과는 다른 케이스였다.