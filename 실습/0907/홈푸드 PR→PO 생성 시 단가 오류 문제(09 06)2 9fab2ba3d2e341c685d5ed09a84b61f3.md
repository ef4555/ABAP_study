# 홈푸드 PR→PO 생성 시 단가 오류 문제(09/06)2

생성자: 최예훈
생성 일시: 2023년 9월 7일 오후 4:23
태그: 업무

PR→PO 생성 시 운영 서버에서 발생한 다른 문제 해결

## 결론 : PR→ PO 생성 시 이상한 단가가 반영되었던 원인

8월 값이 없어서 가장 최근 단가를 끌고 와서 PO를 생성한 것 

이를 찾기 위해 F1을 이용해서 연관 테이블을 찾고 그 테이블이 사용된 프로그램 찾아 연관된 다른 테이블 조회를 하여 단가 변경 로그를 찾아서 원인을 알아낼 수 있었음

- ME13에서 금액과 관련된 테이블 찾아 떠나는 여정
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%201.png)
    
    F1을 통해 KONP라는 테이블이 ME13에서 자재 단가에 관여한다는 것을 확인 가능
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%202.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%203.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%204.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%205.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%206.png)
    
    더블클릭해서 
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%207.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%208.png)
    
    a017 테이블이 단가 정보와 관련 있다는 것을 확인 가능
    
- A017 테이블
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%209.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2010.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2011.png)
    
    여기서 얻은 KNIMH(조건 레코드 번호) 값으로 KONP에서 자재 단가 변경 기록 확인 가능
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2012.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2013.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2014.png)
    
    단가 확인 가능
    
- 자재 변경 내역 리스트
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2015.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2016.png)
    
    ![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2017.png)
    

문제의 결정적 이유

![Untitled](%E1%84%92%E1%85%A9%E1%86%B7%E1%84%91%E1%85%AE%E1%84%83%E1%85%B3%20PR%E2%86%92PO%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%20%E1%84%83%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%20%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(09%2006)2%209fab2ba3d2e341c685d5ed09a84b61f3/Untitled%2018.png)

## 생각해보기

CBO 프로그램에서 해당 일자에 PO 생성 시 단가 설정이 안되어 있다면 어떻게 감지해서 에러를 출력할 수 있을까?

A017과 KONP 테이블을 이용해서 확인할 수 있는 쿼리 생각